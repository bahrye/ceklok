<div class="container" id="hasilCeklokContainer">
  <h2>Rekapitulasi Hasil Ceklok Bulanan</h2>

  <div class="rekap-controls" id="rekapControlsContainer">
    <div class="form-row" style="justify-content: center; align-items: center; margin-bottom: 20px; gap: 10px;">
      <label for="rekapBulanSelect">Pilih Bulan:</label>
      <select id="rekapBulanSelect">
        <option value="01">Januari</option>
        <option value="02">Februari</option>
        <option value="03">Maret</option>
        <option value="04">April</option>
        <option value="05">Mei</option>
        <option value="06">Juni</option>
        <option value="07">Juli</option>
        <option value="08">Agustus</option>
        <option value="09">September</option>
        <option value="10">Oktober</option>
        <option value="11">November</option>
        <option value="12">Desember</option>
      </select>
      <label for="rekapTahunSelect">Pilih Tahun:</label>
      <select id="rekapTahunSelect"></select>
      <button id="btnTampilkanRekap" onclick="loadMonthlyRekap()">Tampilkan Rekap</button>
    </div>
  </div>

  <p style="text-align:center;"><strong>Rekapitulasi untuk Periode:</strong> <span id="rekapInfoBulanTahun">Memuat...</span></p>

  <div class="table-container rekap-table-container" style="margin-top: 15px;">
    <table id="rekapTable">
      <thead id="rekapTableThead"></thead>
      <tbody id="rekapTableTbody"></tbody>
    </table>
  </div>

  <div class="btn-container" style="margin-top: 30px;">
    <button id="btnPrintRekap" onclick="handlePrintRekap()">Cetak Rekap PDF</button>
    <!-- PERBAIKAN: Tombol kembali memanggil fungsi spesifik untuk kembali ke dasbor guru -->
    <button onclick="goBackToUserDashboard()">Kembali ke Dasbor</button>
  </div>
</div>

<style>
  /* (Style dari file asli tetap dipertahankan) */
  #dynamicRekapTable tr.pemisah-guru-atas td {
      border-top: 1px solid #888;
  }
  #dynamicRekapTable tr.pemisah-guru-bawah td {
      border-bottom: 1px solid #888;
  }
  #dynamicRekapTable td.libur-minggu { background-color: #fff0f0; color: #d9534f; font-weight: bold; text-align: center; }
  #dynamicRekapTable td.libur-kalender { background-color: #ffeaa7; color: #8c6d00; font-weight: bold; text-align: center; }
  #dynamicRekapTable td.keterangan-manual { background-color: #e7f3fe; color: #006cbe; font-style: italic; text-align: center; }
  #dynamicRekapTable td.hadir { text-align: center; }
  #dynamicRekapTable td.rekap-nama-guru { font-weight: bold; vertical-align: middle !important; text-align: left !important; }
  #dynamicRekapTable th.rekap-tgl-header { min-width: 40px; }
  #hasilCeklokContainer .table-container#rekapTableContainer {
      max-height: 70vh;
      overflow: auto;
      position: relative;
      border: 1px solid #ccc;
      margin-top: 10px;
  }
  #dynamicRekapTable {
      width: auto;
      min-width: 100%;
      border-collapse: separate;
      border-spacing: 0;
  }
  #dynamicRekapTable th,
  #dynamicRekapTable td {
      padding: 8px 10px;
      text-align: center;
      border: 1px solid #e0e0e0;
      white-space: nowrap;
  }
  #dynamicRekapTable thead th {
      position: -webkit-sticky;
      position: sticky;
      top: 0;
      background-color: var(--primary);
      color: var(--white);
      z-index: 20;
  }
  #dynamicRekapTable thead th:first-child {
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      top: 0;
      z-index: 30;
      background-color: var(--primary);
      min-width: 180px;
  }
  #dynamicRekapTable tbody td.rekap-nama-guru {
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      background-color: #f8f9fa;
      color: var(--text);
      z-index: 10;
      text-align: left !important;
      font-weight: bold;
      min-width: 180px;
  }
</style>
